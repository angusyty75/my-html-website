<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>香港優質傢俬 - 精選傢具專賣店</title>
    <meta name="description" content="香港優質傢俬公司提供高品質傢具，包括沙發、餐桌、床組和辦公傢具。免費送貨和安裝服務。">
    <meta name="keywords" content="香港傢俬,傢具,沙發,餐桌,床,辦公傢具,傢俬店">
    <meta name="author" content="香港優質傢俬公司">
    
    <!-- Open Graph / Social Media Meta Tags -->
    <meta property="og:title" content="香港優質傢俬 - 精選傢具專賣店">
    <meta property="og:description" content="香港優質傢俬公司提供高品質傢具，免費送貨和安裝服務。">
    <meta property="og:type" content="website">
    
    <!-- Structured Data for SEO -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FurnitureStore",
      "name": "香港優質傢俬",
      "description": "香港優質傢俬公司提供高品質傢具",
      "url": "https://www.hkfurniture.com",
      "address": {
        "@type": "PostalAddress",
        "addressLocality": "香港",
        "addressCountry": "HK"
      },
      "telephone": "+852-1234-5678"
    }
    </script>
    
    <style>
        /* Base Styles */
        :root {
            --primary-color: #8B4513;
            --secondary-color: #D2B48C;
            --accent-color: #A0522D;
            --light-color: #F5F5DC;
            --dark-color: #3E2723;
            --text-color: #333;
            --light-text: #FFF;
            --shadow: 0 4px 6px rgba(0,0,0,0.1);
            --transition: all 0.3s ease;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Noto Sans TC', 'Microsoft JhengHei', 'Noto Sans SC', sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: #f9f9f9;
        }
        
        a {
            text-decoration: none;
            color: inherit;
        }
        
        ul {
            list-style: none;
        }
        
        img {
            max-width: 100%;
            height: auto;
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }
        
        .btn {
            display: inline-block;
            padding: 10px 20px;
            background-color: var(--primary-color);
            color: var(--light-text);
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: bold;
        }
        
        .btn:hover {
            background-color: var(--accent-color);
            transform: translateY(-2px);
        }
        
        /* Header Styles */
        header {
            background-color: var(--light-color);
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
        }
        
        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .nav-menu {
            display: flex;
            align-items: center;
        }
        
        .nav-item {
            margin-left: 20px;
            position: relative;
        }
        
        .nav-link {
            font-weight: 500;
            padding: 5px 0;
            transition: var(--transition);
        }
        
        .nav-link:hover {
            color: var(--primary-color);
        }
        
        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
        }
        
        /* Language Selector */
        .language-selector {
            position: relative;
            margin-left: 20px;
        }
        
        .language-btn {
            background: none;
            border: 1px solid var(--primary-color);
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: var(--transition);
            font-weight: 500;
        }
        
        .language-btn:hover {
            background-color: var(--primary-color);
            color: white;
        }
        
        .language-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: white;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-shadow: var(--shadow);
            display: none;
            min-width: 120px;
            z-index: 1000;
        }
        
        .language-dropdown.show {
            display: block;
        }
        
        .language-option {
            padding: 10px 15px;
            cursor: pointer;
            transition: var(--transition);
            border-bottom: 1px solid #f0f0f0;
        }
        
        .language-option:last-child {
            border-bottom: none;
        }
        
        .language-option:hover {
            background-color: var(--light-color);
        }
        
        .language-option.active {
            background-color: var(--primary-color);
            color: white;
        }
        
        /* Hero Section */
        .hero {
            background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('https://images.unsplash.com/photo-1555041469-a586c61ea9bc?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80');
            background-size: cover;
            background-position: center;
            color: var(--light-text);
            text-align: center;
            padding: 100px 20px;
        }
        
        .hero h1 {
            font-size: 2.5rem;
            margin-bottom: 20px;
        }
        
        .hero p {
            font-size: 1.2rem;
            margin-bottom: 30px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }
        
        /* Categories Section */
        .section-title {
            text-align: center;
            margin: 50px 0 30px;
            font-size: 2rem;
            color: var(--dark-color);
        }
        
        .categories {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 50px;
        }
        
        .category-card {
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }
        
        .category-card:hover {
            transform: translateY(-5px);
        }
        
        .category-img {
            height: 200px;
            overflow: hidden;
        }
        
        .category-img img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: var(--transition);
        }
        
        .category-card:hover .category-img img {
            transform: scale(1.1);
        }
        
        .category-content {
            padding: 15px;
            text-align: center;
        }
        
        /* Products Section */
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 50px;
        }
        
        .product-card {
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
            cursor: pointer;
        }
        
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.15);
        }
        
        .product-img {
            height: 250px;
            overflow: hidden;
            position: relative;
        }
        
        .product-img img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: var(--transition);
        }
        
        .product-card:hover .product-img img {
            transform: scale(1.05);
        }
        
        .product-content {
            padding: 15px;
        }
        
        .product-title {
            font-size: 1.2rem;
            margin-bottom: 10px;
            font-weight: bold;
        }
        
        .product-price {
            color: var(--primary-color);
            font-weight: bold;
            font-size: 1.1rem;
            margin-bottom: 15px;
        }
        
        /* Product Modal Styles - FIXED FULL SCREEN */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.95);
            z-index: 1000;
            overflow: hidden;
        }
        
        .modal-content {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
        }
        
        .modal-header {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            padding: 20px;
            background: linear-gradient(to bottom, rgba(0,0,0,0.7) 0%, transparent 100%);
            color: white;
            z-index: 10;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-title {
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        .close-modal {
            background: none;
            color: white;
            border: none;
            font-size: 2rem;
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }
        
        .close-modal:hover {
            transform: rotate(90deg);
        }
        
        .modal-body {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            padding: 0;
            width: 100%;
            height: 100%;
        }
        
        .modal-image-container {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        
        .modal-image {
            max-width: 100%;
            max-height: 100%;
            width: auto;
            height: auto;
            object-fit: contain;
            display: block;
        }
        
        .image-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255,255,255,0.2);
            color: white;
            border: none;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            transition: var(--transition);
            backdrop-filter: blur(10px);
            z-index: 20;
        }
        
        .image-nav:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-50%) scale(1.1);
        }
        
        .prev-image {
            left: 30px;
        }
        
        .next-image {
            right: 30px;
        }
        
        .image-counter {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            background: rgba(0,0,0,0.5);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            backdrop-filter: blur(10px);
            z-index: 20;
        }
        
        /* About Section */
        .about {
            background-color: var(--light-color);
            padding: 50px 0;
            margin: 50px 0;
        }
        
        .about-content {
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            gap: 30px;
        }
        
        .about-text {
            flex: 1;
            min-width: 300px;
        }
        
        .about-img {
            flex: 1;
            min-width: 300px;
            border-radius: 8px;
            overflow: hidden;
        }
        
        /* Footer */
        footer {
            background-color: var(--dark-color);
            color: var(--light-text);
            padding: 50px 0 20px;
        }
        
        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .footer-section h3 {
            margin-bottom: 20px;
            font-size: 1.2rem;
        }
        
        .footer-section ul li {
            margin-bottom: 10px;
        }
        
        .footer-section a:hover {
            color: var(--secondary-color);
        }
        
        /* Google Maps Link Style */
        .address-link {
            color: var(--light-text);
            text-decoration: none;
            transition: var(--transition);
            cursor: pointer;
            border-bottom: 1px dotted transparent;
        }
        
        .address-link:hover {
            color: var(--secondary-color);
            border-bottom: 1px dotted var(--secondary-color);
        }
        
        .copyright {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid rgba(255,255,255,0.1);
        }
        
        /* Loading Spinner */
        .loading {
            display: inline-block;
            width: 50px;
            height: 50px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: var(--primary-color);
            animation: spin 1s ease-in-out infinite;
            margin: 20px auto;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Ensure nav-menu is visible by default on desktop */
        .nav-menu {
            display: flex !important;
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .nav-menu {
                display: none !important;
                position: absolute;
                top: 70px;
                left: 0;
                width: 100%;
                background-color: var(--light-color);
                flex-direction: column;
                padding: 20px;
                box-shadow: var(--shadow);
            }
            
            .nav-menu.active {
                display: flex !important;
            }
            
            .nav-item {
                margin: 10px 0;
            }
            
            .mobile-menu-btn {
                display: block;
            }
            
            .hero h1 {
                font-size: 2rem;
            }
            
            .hero p {
                font-size: 1rem;
            }
            
            .image-nav {
                width: 50px;
                height: 50px;
            }
            
            .prev-image {
                left: 15px;
            }
            
            .next-image {
                right: 15px;
            }
            
            .language-selector {
                margin-left: 0;
                margin-top: 15px;
            }
        }
        
        @media (max-width: 480px) {
            .hero {
                padding: 60px 20px;
            }
            
            .section-title {
                font-size: 1.5rem;
            }
            
            .products-grid {
                grid-template-columns: 1fr;
            }
            
            .modal-title {
                font-size: 1.2rem;
            }
            
            .image-nav {
                width: 40px;
                height: 40px;
                font-size: 1.2rem;
            }
            
            .prev-image {
                left: 10px;
            }
            
            .next-image {
                right: 10px;
            }
            
            .image-counter {
                bottom: 20px;
                font-size: 0.8rem;
                padding: 6px 12px;
            }
        }
    </style>
    
    <!-- Google Fonts for Chinese and English -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&family=Noto+Sans+SC:wght@300;400;500;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container header-container">
            <div class="logo" id="company-name">香港優質傢俬</div>
            <button class="mobile-menu-btn" id="mobile-menu-toggle">☰</button>
            <nav>
                <ul class="nav-menu" id="nav-menu">
                    <li class="nav-item"><a href="#home" class="nav-link" id="nav-home">首頁</a></li>
                    <li class="nav-item"><a href="#products" class="nav-link" id="nav-products">產品</a></li>
                    <li class="nav-item"><a href="#categories" class="nav-link" id="nav-categories">分類</a></li>
                    <li class="nav-item"><a href="#about" class="nav-link" id="nav-about">關於我們</a></li>
                    <li class="nav-item"><a href="#contact" class="nav-link" id="nav-contact">聯絡我們</a></li>
                    <li class="nav-item language-selector">
                        <button class="language-btn" id="languageBtn">
                            <span id="currentLanguage">繁體中文</span>
                            <span>▼</span>
                        </button>
                        <div class="language-dropdown" id="languageDropdown">
                            <div class="language-option active" data-lang="zh-HK">繁體中文</div>
                            <div class="language-option" data-lang="zh-CN">简体中文</div>
                            <div class="language-option" data-lang="en">English</div>
                        </div>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero" id="home">
        <div class="container">
            <h1 id="hero-title">打造理想家居</h1>
            <p id="hero-subtitle">精選高品質傢具，為您創造舒適生活空間</p>
            <a href="#products" class="btn" id="hero-cta">瀏覽產品</a>
        </div>
    </section>

    <!-- Categories Section -->
    <section id="categories">
        <div class="container">
            <h2 class="section-title" id="categories-title">產品分類</h2>
            <div class="categories" id="categories-container">
                <div class="loading"></div>
            </div>
        </div>
    </section>

    <!-- Products Section -->
    <section id="products">
        <div class="container">
            <h2 class="section-title" id="products-title">精選產品</h2>
            <div class="products-grid" id="products-container">
                <div class="loading"></div>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section class="about" id="about">
        <div class="container">
            <div class="about-content">
                <div class="about-text">
                    <h2 id="about-title">關於香港優質傢俬</h2>
                    <p id="about-description">我們是香港領先的傢具供應商，擁有超過20年經驗。我們致力於為客戶提供高品質、耐用且設計精美的傢具。所有產品均經過嚴格質量控制，確保符合香港家居環境需求。</p>
                    <p id="about-mission">我們的使命是幫助客戶打造理想家居，提供專業建議和優質服務。</p>
                    <a href="#contact" class="btn" id="about-cta">聯絡我們</a>
                </div>
                <div class="about-img">
                    <img src="https://images.unsplash.com/photo-1586023492125-27b2c045efd7?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=958&q=80" alt="傢俬店內部">
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer id="contact">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3 id="footer-contact-title">聯絡我們</h3>
                    <ul>
                        <li>
                            <span id="footer-address" class="address-link" onclick="openGoogleMaps()">地址: 香港九龍觀塘道123號</span>
                        </li>
                        <li id="footer-phone">電話: +852 1234 5678</li>
                        <li id="footer-email">電郵: info@hkfurniture.com</li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3 id="footer-hours-title">營業時間</h3>
                    <ul>
                        <li id="footer-weekdays">星期一至五: 10:00 - 20:00</li>
                        <li id="footer-weekends">星期六日: 10:00 - 18:00</li>
                        <li id="footer-holidays">公眾假期: 12:00 - 17:00</li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3 id="footer-links-title">快速連結</h3>
                    <ul>
                        <li><a href="#home" id="footer-link-home">首頁</a></li>
                        <li><a href="#products" id="footer-link-products">產品</a></li>
                        <li><a href="#about" id="footer-link-about">關於我們</a></li>
                        <li><a href="#contact" id="footer-link-contact">聯絡我們</a></li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                <p id="footer-copyright">© 2023 香港優質傢俬 版權所有</p>
            </div>
        </div>
    </footer>

    <!-- Product Modal -->
    <div id="productModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="modalProductTitle">產品詳情</h3>
                <button class="close-modal" id="closeModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="modal-image-container">
                    <img src="" alt="" class="modal-image" id="modalImage">
                </div>
                <button class="image-nav prev-image" id="prevImage">‹</button>
                <button class="image-nav next-image" id="nextImage">›</button>
                <div class="image-counter" id="imageCounter">0 / 0</div>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let currentProductIndex = 0;
        let currentImageIndex = 0;
        let currentProductImages = [];
        let productsData = [];
        let categoriesData = [];
        let labelsData = {};
        let currentLanguage = 'zh-HK'; // Traditional Chinese as default

        // Language data
        const languageData = {
            'zh-HK': {
                languageName: '繁體中文',
                viewDetails: '查看詳情',
                loading: '載入中...',
                errorLoading: '無法加載內容，請稍後再試。',
                errorLoadingCategories: '無法加載產品分類，請稍後再試。',
                errorLoadingProducts: '無法加載產品，請稍後再試。',
                unnamedCategory: '未命名分類',
                unnamedProduct: '未命名產品'
            },
            'zh-CN': {
                languageName: '简体中文',
                viewDetails: '查看详情',
                loading: '加载中...',
                errorLoading: '无法加载内容，请稍后再试。',
                errorLoadingCategories: '无法加载产品分类，请稍后再试。',
                errorLoadingProducts: '无法加载产品，请稍后再试。',
                unnamedCategory: '未命名分类',
                unnamedProduct: '未命名产品'
            },
            'en': {
                languageName: 'English',
                viewDetails: 'View Details',
                loading: 'Loading...',
                errorLoading: 'Unable to load content, please try again later.',
                errorLoadingCategories: 'Unable to load product categories, please try again later.',
                errorLoadingProducts: 'Unable to load products, please try again later.',
                unnamedCategory: 'Unnamed Category',
                unnamedProduct: 'Unnamed Product'
            }
        };

        // Function to open Google Maps
        function openGoogleMaps() {
            // Google Maps URL for the company address
            const address = "香港九龍觀塘道123號";
            const googleMapsUrl = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(address)}`;
            window.open(googleMapsUrl, '_blank');
        }

        // Safe element getter function
        function getElement(id) {
            const element = document.getElementById(id);
            if (!element) {
                console.warn(`Element with id '${id}' not found`);
                return null;
            }
            return element;
        }

        // Function to set language
        function setLanguage(lang) {
            console.log('Setting language to:', lang);
            currentLanguage = lang;
            
            // Update HTML lang attribute
            document.documentElement.lang = lang;
            
            // Update language selector
            const currentLanguageElement = getElement('currentLanguage');
            if (currentLanguageElement) {
                currentLanguageElement.textContent = languageData[lang].languageName;
            }
            
            // Update active state in dropdown
            document.querySelectorAll('.language-option').forEach(option => {
                if (option.dataset.lang === lang) {
                    option.classList.add('active');
                } else {
                    option.classList.remove('active');
                }
            });
            
            // Update all content with new language
            updateAllContent();
            
            // Save to localStorage
            localStorage.setItem('preferredLanguage', lang);
        }

        // Function to update all content with current language
        function updateAllContent() {
            console.log('Updating all content for language:', currentLanguage);
            updateLabels();
            updateCategories();
            updateProducts();
        }

        // Function to load labels from JSON file
        async function loadLabels() {
            try {
                const response = await fetch('furniture2multi_labels.json?t=' + Date.now());
                if (!response.ok) {
                    throw new Error('Failed to load labels');
                }
                labelsData = await response.json();
                
                // Validate labels data structure
                if (!labelsData || typeof labelsData !== 'object') {
                    throw new Error('Invalid labels data structure');
                }
                
                updateLabels();
                
            } catch (error) {
                console.error('Error loading labels:', error);
                // Don't set default labels here since we have hardcoded Traditional Chinese
            }
        }

        // Function to update labels with current language
        function updateLabels() {
            if (!labelsData || Object.keys(labelsData).length === 0) {
                console.log('No labels data available, using hardcoded Traditional Chinese');
                return;
            }

            const labels = labelsData[currentLanguage] || labelsData['zh-HK'] || {};
            console.log('Updating labels with:', labels);
            
            // Helper function to safely update element text
            function updateElement(id, text) {
                const element = getElement(id);
                if (element && text) {
                    element.textContent = text;
                }
            }

            // Company name
            updateElement('company-name', labels.companyName);
            
            // Navigation
            updateElement('nav-home', labels.nav?.home);
            updateElement('nav-products', labels.nav?.products);
            updateElement('nav-categories', labels.nav?.categories);
            updateElement('nav-about', labels.nav?.about);
            updateElement('nav-contact', labels.nav?.contact);
            
            // Hero section
            updateElement('hero-title', labels.hero?.title);
            updateElement('hero-subtitle', labels.hero?.subtitle);
            updateElement('hero-cta', labels.hero?.cta);
            
            // Categories section
            updateElement('categories-title', labels.categories?.title);
            
            // Products section
            updateElement('products-title', labels.products?.title);
            
            // About section
            updateElement('about-title', labels.about?.title);
            updateElement('about-description', labels.about?.description);
            updateElement('about-mission', labels.about?.mission);
            updateElement('about-cta', labels.about?.cta);
            
            // Footer section
            updateElement('footer-contact-title', labels.footer?.contactTitle);
            updateElement('footer-address', labels.footer?.address);
            updateElement('footer-phone', labels.footer?.phone);
            updateElement('footer-email', labels.footer?.email);
            updateElement('footer-hours-title', labels.footer?.hoursTitle);
            updateElement('footer-weekdays', labels.footer?.weekdays);
            updateElement('footer-weekends', labels.footer?.weekends);
            updateElement('footer-holidays', labels.footer?.holidays);
            updateElement('footer-links-title', labels.footer?.linksTitle);
            updateElement('footer-link-home', labels.footer?.linkHome);
            updateElement('footer-link-products', labels.footer?.linkProducts);
            updateElement('footer-link-about', labels.footer?.linkAbout);
            updateElement('footer-link-contact', labels.footer?.linkContact);
            updateElement('footer-copyright', labels.footer?.copyright);

            // Update view details buttons
            document.querySelectorAll('.view-details-btn').forEach(btn => {
                btn.textContent = languageData[currentLanguage].viewDetails;
            });
        }

        // Function to load categories from JSON file
        async function loadCategories() {
            try {
                const response = await fetch('furniture2multi_categories.json?t=' + Date.now());
                if (!response.ok) {
                    throw new Error('Failed to load categories');
                }
                categoriesData = await response.json();
                
                // Validate categories data
                if (!Array.isArray(categoriesData)) {
                    throw new Error('Categories data is not an array');
                }
                
                updateCategories();
                
            } catch (error) {
                console.error('Error loading categories:', error);
                const categoriesContainer = getElement('categories-container');
                if (categoriesContainer) {
                    categoriesContainer.innerHTML = `<p>${languageData[currentLanguage].errorLoadingCategories}</p>`;
                }
            }
        }

        // Function to update categories with current language
        function updateCategories() {
            const categoriesContainer = getElement('categories-container');
            if (!categoriesContainer) return;
            
            if (!categoriesData || categoriesData.length === 0) {
                categoriesContainer.innerHTML = `<div class="loading"></div>`;
                return;
            }

            categoriesContainer.innerHTML = '';
            
            categoriesData.forEach(category => {
                // Validate category object
                if (!category || typeof category !== 'object') {
                    console.warn('Invalid category object:', category);
                    return;
                }
                
                // Get localized name and description
                const categoryName = (typeof category.name === 'object' ? category.name[currentLanguage] : category.name) || languageData[currentLanguage].unnamedCategory;
                const categoryDescription = (typeof category.description === 'object' ? category.description[currentLanguage] : category.description) || '';
                
                const categoryCard = document.createElement('div');
                categoryCard.className = 'category-card';
                
                categoryCard.innerHTML = `
                    <div class="category-img">
                        <img src="${category.image || ''}" alt="${categoryName}" loading="lazy">
                    </div>
                    <div class="category-content">
                        <h3>${categoryName}</h3>
                        <p>${categoryDescription}</p>
                    </div>
                `;
                
                categoriesContainer.appendChild(categoryCard);
            });
        }

        // Function to load products from JSON file
        async function loadProducts() {
            try {
                const response = await fetch('furniture2multi_products.json?t=' + Date.now());
                if (!response.ok) {
                    throw new Error('Failed to load products');
                }
                productsData = await response.json();
                
                // Validate products data
                if (!Array.isArray(productsData)) {
                    throw new Error('Products data is not an array');
                }
                
                updateProducts();
                
            } catch (error) {
                console.error('Error loading products:', error);
                const productsContainer = getElement('products-container');
                if (productsContainer) {
                    productsContainer.innerHTML = `<p>${languageData[currentLanguage].errorLoadingProducts}</p>`;
                }
            }
        }

        // Function to update products with current language
        function updateProducts() {
            const productsContainer = getElement('products-container');
            if (!productsContainer) return;
            
            if (!productsData || productsData.length === 0) {
                productsContainer.innerHTML = `<div class="loading"></div>`;
                return;
            }

            productsContainer.innerHTML = '';
            
            productsData.forEach((product, index) => {
                // Validate product object
                if (!product || typeof product !== 'object') {
                    console.warn('Invalid product object:', product);
                    return;
                }
                
                // Get localized name and description
                const productName = (typeof product.name === 'object' ? product.name[currentLanguage] : product.name) || languageData[currentLanguage].unnamedProduct;
                const productDescription = (typeof product.description === 'object' ? product.description[currentLanguage] : product.description) || '';
                const productPrice = typeof product.price === 'number' ? product.price : 0;
                const productImage = product.image || '';
                
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                productCard.setAttribute('data-product-index', index);
                
                productCard.innerHTML = `
                    <div class="product-img">
                        <img src="${productImage}" alt="${productName}" loading="lazy">
                    </div>
                    <div class="product-content">
                        <h3 class="product-title">${productName}</h3>
                        <p class="product-price">HK$ ${productPrice.toLocaleString()}</p>
                        <p>${productDescription}</p>
                        <button class="btn view-details-btn" style="margin-top: 15px;">${languageData[currentLanguage].viewDetails}</button>
                    </div>
                `;
                
                productsContainer.appendChild(productCard);
            });
            
            // Add event listeners to view details buttons
            document.querySelectorAll('.view-details-btn').forEach(button => {
                button.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const productCard = this.closest('.product-card');
                    const productIndex = parseInt(productCard.getAttribute('data-product-index'));
                    openProductModal(productIndex);
                });
            });
            
            // Add click event to product cards
            document.querySelectorAll('.product-card').forEach(card => {
                card.addEventListener('click', function() {
                    const productIndex = parseInt(this.getAttribute('data-product-index'));
                    openProductModal(productIndex);
                });
            });
        }

        // Function to open product modal
        function openProductModal(productIndex) {
            const product = productsData[productIndex];
            if (!product) {
                console.error('Product not found at index:', productIndex);
                return;
            }
            
            currentProductIndex = productIndex;
            currentImageIndex = 0;
            currentProductImages = product.images || [product.image || ''];
            
            // Get localized product name
            const productName = (typeof product.name === 'object' ? product.name[currentLanguage] : product.name) || languageData[currentLanguage].unnamedProduct;
            
            // Set modal content
            const modalProductTitle = getElement('modalProductTitle');
            const modalImage = getElement('modalImage');
            if (modalProductTitle) modalProductTitle.textContent = productName;
            if (modalImage) {
                modalImage.src = currentProductImages[0] || '';
                // Force image to load and then adjust
                modalImage.onload = function() {
                    console.log('Image loaded, dimensions:', this.naturalWidth, 'x', this.naturalHeight);
                };
            }
            updateImageCounter();
            
            // Show the modal
            const productModal = getElement('productModal');
            if (productModal) {
                productModal.style.display = 'block';
                document.body.style.overflow = 'hidden';
            }
        }

        // Function to show previous image
        function showPreviousImage() {
            currentImageIndex = (currentImageIndex - 1 + currentProductImages.length) % currentProductImages.length;
            const modalImage = getElement('modalImage');
            if (modalImage) {
                modalImage.src = currentProductImages[currentImageIndex] || '';
            }
            updateImageCounter();
        }

        // Function to show next image
        function showNextImage() {
            currentImageIndex = (currentImageIndex + 1) % currentProductImages.length;
            const modalImage = getElement('modalImage');
            if (modalImage) {
                modalImage.src = currentProductImages[currentImageIndex] || '';
            }
            updateImageCounter();
        }

        // Function to update image counter
        function updateImageCounter() {
            const imageCounter = getElement('imageCounter');
            if (imageCounter) {
                imageCounter.textContent = `${currentImageIndex + 1} / ${currentProductImages.length}`;
            }
        }

        // Function to close modal
        function closeModal() {
            const productModal = getElement('productModal');
            if (productModal) {
                productModal.style.display = 'none';
                document.body.style.overflow = 'auto';
            }
        }

        // Function to setup event listeners safely
        function setupEventListeners() {
            console.log('Setting up event listeners...');
            
            // Mobile menu toggle
            const mobileMenuToggle = getElement('mobile-menu-toggle');
            if (mobileMenuToggle) {
                mobileMenuToggle.addEventListener('click', function() {
                    const navMenu = getElement('nav-menu');
                    if (navMenu) {
                        navMenu.classList.toggle('active');
                    }
                });
            }

            // Language selector functionality
            const languageBtn = getElement('languageBtn');
            if (languageBtn) {
                languageBtn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const languageDropdown = getElement('languageDropdown');
                    if (languageDropdown) {
                        languageDropdown.classList.toggle('show');
                    }
                });
            }

            // Close language dropdown when clicking outside
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.language-selector')) {
                    const languageDropdown = getElement('languageDropdown');
                    if (languageDropdown) {
                        languageDropdown.classList.remove('show');
                    }
                }
            });

            // Language selection
            document.querySelectorAll('.language-option').forEach(option => {
                option.addEventListener('click', function() {
                    const lang = this.dataset.lang;
                    console.log('Language selected:', lang);
                    setLanguage(lang);
                    const languageDropdown = getElement('languageDropdown');
                    if (languageDropdown) {
                        languageDropdown.classList.remove('show');
                    }
                });
            });

            // Modal functionality
            const closeModalBtn = getElement('closeModal');
            if (closeModalBtn) {
                closeModalBtn.addEventListener('click', closeModal);
            }

            const productModal = getElement('productModal');
            if (productModal) {
                productModal.addEventListener('click', function(e) {
                    if (e.target === this) {
                        closeModal();
                    }
                });
            }

            // Image navigation
            const prevImageBtn = getElement('prevImage');
            if (prevImageBtn) {
                prevImageBtn.addEventListener('click', showPreviousImage);
            }

            const nextImageBtn = getElement('nextImage');
            if (nextImageBtn) {
                nextImageBtn.addEventListener('click', showNextImage);
            }

            // Close modal with Escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeModal();
                }
                // Arrow key navigation
                if (e.key === 'ArrowLeft') {
                    showPreviousImage();
                }
                if (e.key === 'ArrowRight') {
                    showNextImage();
                }
            });

            console.log('All event listeners setup successfully');
        }

        // Function to reload all data
        async function reloadData() {
            await loadLabels();
            await loadCategories();
            await loadProducts();
        }

        // Initialize the page
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('Page loaded, initializing...');
            
            // Setup event listeners first
            setupEventListeners();
            
            // ALWAYS use Traditional Chinese as default, ignore any saved preferences
            console.log('Forcing default language: Traditional Chinese (zh-HK)');
            setLanguage('zh-HK');
            
            // Load all data
            await reloadData();
        });

        // Add global function to reload data
        window.reloadData = reloadData;
        window.setLanguage = setLanguage;
        window.openGoogleMaps = openGoogleMaps;
    </script>
</body>
</html>